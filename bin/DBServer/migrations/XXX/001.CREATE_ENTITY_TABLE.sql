USE machine;


CREATE TABLE IF NOT EXISTS `entitytype` (
  `Id` int(11) NOT NULL,
  `DisplayName` VARCHAR(500) NOT NULL,
  `IsManaged` BOOLEAN DEFAULT false,
  `SecondaryKey` INT(11) NULL,  
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;

CREATE TABLE IF NOT EXISTS `entity` (
	`Id` INT(11) NOT NULL AUTO_INCREMENT,
	`DisplayName` VARCHAR(100) NOT NULL DEFAULT '',
	`EntityTypeId` INT(11) NOT NULL DEFAULT 0,
	`HashCode` CHAR(64)  NOT NULL,
	`SecondaryKey` INT(11) NULL,
	`Status` ENUM ('Available','Unavailable','Warning', 'Alarm', 'NoIconToDisplay', 'ToBeDeleted'
				, 'Original', 'ModifiedByCustomer'
				, 'ModifiedByFICEP', 'ToBeSkipped'
				, 'Empty', 'InProgress', 'Processed'
				, 'Executed', 'RQLoad', 'RQAck'
				, 'NotAvailable', 'Aborted', 'NotReady') NOT NULL,
	`Priority` INT NOT NULL DEFAULT 1,
	`CreatedBy` VARCHAR(32) NOT NULL DEFAULT 'MITROL',
	`CreatedOn` DATETIME NOT NULL DEFAULT current_timestamp(),
	`UpdatedBy` VARCHAR(32) NOT NULL DEFAULT 'MITROL',
	`UpdatedOn` DATETIME NOT NULL DEFAULT current_timestamp(),
	`RowVersion` TEXT NOT NULL,
	PRIMARY KEY (`Id`),
	FOREIGN KEY (EntityTypeId) REFERENCES entitytype(id),
	UNIQUE INDEX `IDX_Entity_DisplayName` (`DisplayName`, EntityTypeId) USING BTREE,
	INDEX `IDX_Entity_HashCode` (`HashCode`) USING BTREE	
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;


CREATE TABLE IF NOT EXISTS `entityLink` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `RelatedEntityHashCode` CHAR(64) NOT NULL,
  `EntityHashCode` CHAR(64) NOT NULL,
  `RelationType` ENUM('Child','ForeignKey', 'Sibling') NOT NULL COLLATE 'utf8mb4_bin',
  `RowNumber` INT(11) NOT NULL DEFAULT(1),
  `Level` INT(11) NOT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;

REPLACE INTO entitytype
(DisplayName, Id, SecondaryKey,  IsManaged)
VALUES
('ProfileL', 1, NULL, false),
('ProfileV', 2, NULL, false),
('ProfileB', 3, NULL, false),
('ProfileI', 4, NULL, false),
('ProfileD', 5, NULL, false),
('ProfileT', 6, NULL, false),
('ProfileU', 7, NULL, false),
('ProfileQ', 8, NULL, false),
('ProfileC', 9, NULL, false),
('ProfileF', 11, NULL, false),
('ProfileN', 12, NULL, false),
('ProfileP', 13, NULL, false),
('ProfileR', 14, NULL, false),
('ToolTS15', 15, 8, false),
('ToolTS16', 16, 8, false),
('ToolTS17', 17, 8, false),
('ToolTS18', 18, 8, false),
('ToolTS19', 19, 8, false),
('ToolTS20', 20, 8, false),
('ToolTS32', 32, 1, false),
('ToolTS33', 33, 1, false),
('ToolTS34', 34, 1, false),
('ToolTS35', 35, 1, false),
('ToolTS36', 36, 1, false),
('ToolTS38', 38, 1, false),
('ToolTS39', 39, 1, false),
('ToolTS40', 40, 1, false),
('ToolTS41', 41, 1, false),
('ToolTS50', 50, 16, false),
('ToolTS51', 51, 2, false),
('ToolTS52', 52, 4, false),
('ToolTS53', 53, 2, false),
('ToolTS54', 54, 4, false),
('ToolTS55', 55, 512, false),
('ToolTS56', 56, 512, false),
('ToolTS57', 57, 1, false),
('ToolTS61', 61, 1, false),
('ToolTS62', 62, 1, false),
('ToolTS68', 68, 1, false),
('ToolTS69', 69, 1, false),
('ToolTS70', 70, 1, false),
('ToolTS71', 71, 1, false),
('ToolTS73', 73, 1, false),
('ToolTS74', 74, 1, false),
('ToolTS75', 75, 1, false),
('ToolTS76', 76, 1, false),
('ToolTS77', 77, 1, false),
('ToolTS78', 78, 1, false),
('ToolTS79', 79, 1, false),
('ToolTS80', 80, 256, false),
('ToolTS87', 86, 64, false),
('ToolTS87', 87, 64, false),
('ToolTS88', 88, 64, false),
('ToolTS89', 89, 32, false),
('ToolTS51XPR', 90, 2, NULL, false),
('ToolTS51HPR', 91, 2, NULL, false),
('ToolTS53XPR', 92, 2, NULL, false),
('ToolTS53HPR', 93, 2, NULL, false),
('StockProfileL', 94, NULL, false),
('StockProfileV', 95, NULL, false),
('StockProfileB', 96, NULL, false),
('StockProfileI', 97, NULL, false),
('StockProfileD', 98, NULL, false),
('StockProfileT', 99, NULL, false),
('StockProfileU', 100, NULL, false),
('StockProfileQ', 101, NULL, false),
('StockProfileC', 102, NULL, false),
('StockProfileF', 103, NULL, false),
('StockProfileN', 104, NULL, false),
('StockProfileP', 105, NULL, false),
('StockProfileR', 106, NULL, false),
('ToolHolder', 107, NULL, false),
('PieceProfileL', 108, NULL, false),
('PieceProfileV', 109, NULL, false),
('PieceProfileB', 110, NULL, false),
('PieceProfileI', 111, NULL, false),
('PieceProfileD', 112, NULL, false),
('PieceProfileT', 113, NULL, false),
('PieceProfileU', 114, NULL, false),
('PieceProfileQ', 115, NULL, false),
('PieceProfileC', 116, NULL, false),
('PieceProfileF', 117, NULL, false),
('PieceProfileN', 118, NULL, false),
('PieceProfileP', 119, NULL, false),
('PieceProfileR', 120, NULL, false),
('ProgramPiece', 121, NULL, false),
('ProgramCode', 128, NULL, false),
('ToolRangeTS32', 132, NULL, false),
('ToolRangeTS33', 133, NULL, false),
('ToolRangeTS34', 134, NULL, false),
('ToolRangeTS35', 135, NULL, false),
('ToolRangeTS36', 136, NULL, false),
('ToolRangeTS38', 138, NULL, false),
('ToolRangeTS39', 139, NULL, false),
('ToolRangeTS40', 140, NULL, false),
('ToolRangeTS41', 141, NULL, false),
('ToolRangeTS51', 151, NULL, false),
('ToolRangeTS52', 152, NULL, false),
('ToolRangeTS53', 153, NULL, false),
('ToolRangeTS54', 154, NULL, false),
('ToolRangeTS55', 155, NULL, false),
('ToolRangeTS56', 156, NULL, false),
('ToolRangeTS57', 157, NULL, false),
('ToolRangeTS61', 161, NULL, false),
('ToolRangeTS62', 162, NULL, false),
('ToolRangeTS68', 168, NULL, false),
('ToolRangeTS69', 169, NULL, false),
('ToolRangeTS70', 170, NULL, false),
('ToolRangeTS71', 171, NULL, false),
('ToolRangeTS73', 173, NULL, false),
('ToolRangeTS74', 174, NULL, false),
('ToolRangeTS75', 175, NULL, false),
('ToolRangeTS76', 176, NULL, false),
('ToolRangeTS77', 177, NULL, false),
('ToolRangeTS78', 178, NULL, false),
('ToolRangeTS79', 179, NULL, false),
('ToolRangeTS51HPR', 180, NULL, false),
('ToolRangeTS51XPR', 181, NULL, false),
('ToolRangeTS53HPR', 182, NULL, false),
('ToolRangeTS53XPR', 183, NULL, false),
('ToolSubRangeBevelTS51', 184, NULL, false),
('ToolSubRangeBevelTS52', 185, NULL, false),
('ToolSubRangeBevelTS53', 186, NULL, false),
('ToolSubRangeBevelTS54', 187, NULL, false),
('ToolSubRangeTrueHoleTS51', 188, NULL, false),
('ToolSubRangeTrueHoleTS51HPR', 189, NULL, false),
('ToolSubRangeTrueHoleTS51XPR', 190, NULL, false),
('ToolSubRangeTrueHoleTS53', 191, NULL, false),
('ToolSubRangeTrueHoleTS53HPR', 192, NULL, false),
('ToolSubRangeTrueHoleTS53XPR', 193, NULL, false),
('ToolRangeMarkingTS51', 194, NULL, false),
('ToolRangeMarkingTS51XPR', 195, NULL, false),
('ToolRangeMarkingTS53', 196, NULL, false),
('ToolRangeMarkingTS53XPR', 197, NULL, false),
('ProgramProfileL', 198, NULL, false),
('ProgramProfileV', 199, NULL, false),
('ProgramProfileB', 200, NULL, false),
('ProgramProfileI', 201, NULL, false),
('ProgramProfileD', 202, NULL, false),
('ProgramProfileT', 203, NULL, false),
('ProgramProfileU', 204, NULL, false),
('ProgramProfileQ', 205, NULL, false),
('ProgramProfileC', 206, NULL, false),
('ProgramProfileF', 207, NULL, false),
('ProgramProfileN', 208, NULL, false),
('ProgramProfileP', 209, NULL, false),
('ProgramProfileR', 210, NULL, false),
('ProductionRowProfileL', 211, NULL, false),
('ProductionRowProfileV', 212, NULL, false),
('ProductionRowProfileB', 213, NULL, false),
('ProductionRowProfileI', 214, NULL, false),
('ProductionRowProfileD', 215, NULL, false),
('ProductionRowProfileT', 216, NULL, false),
('ProductionRowProfileU', 217, NULL, false),
('ProductionRowProfileQ', 218, NULL, false),
('ProductionRowProfileC', 219, NULL, false),
('ProductionRowProfileF', 220, NULL, false),
('ProductionRowProfileN', 221, NULL, false),
('ProductionRowProfileP', 222, NULL, false),
('ProductionRowProfileR', 223, NULL, false),
('OperationNode', 224, NULL, false),
('OperationHol', 225, NULL, false),
('OperationPoint', 226, NULL, false),
('OperationSlot', 227, NULL, false),
('OperationTap', 228, NULL, false),
('OperationPathC', 229, NULL, false),
('OperationDeburr', 230, NULL, false),
('OperationBore', 231, NULL, false),
('OperationFlare', 232, NULL, false),
('OperationShape', 233, NULL, false),
('OperationMill', 234, NULL, false),
('OperationMCut', 235, NULL, false),
('OperationNotch', 236, NULL, false),
('OperationShf', 237, NULL, false),
('OperationMisc', 238, NULL, false),
('OperationStiff', 239, NULL, false),
('OperationFHol', 240, NULL, false),
('OperationDHol', 241, NULL, false),
('OperationPathV', 242, NULL, false),
('OperationPathS', 243, NULL, false),
('OperationPathM', 244, NULL, false),
('OperationCope', 245, NULL, false),
('OperationMark', 246, NULL, false),
('OperationToolTechnology', 247, NULL, false),
('OperationBHol', 248, NULL, false),
('OperationMSaw', 249, NULL, false),
('OperationSense', 250, NULL, false),
('Material', 251, NULL, false),
('VertexPathC', 252, NULL, false),
('VertexPathS', 253, NULL, false),
('VertexPathM', 254, NULL, false),	
('OperationSense', 255, NULL, false),
('VertexShape', 256, NULL, false);
