USE machine;


CREATE TABLE IF NOT EXISTS `entitytype` (
  `Id` int(11) NOT NULL,
  `DisplayName` VARCHAR(500) NOT NULL,
  `IsManaged` BOOLEAN DEFAULT false,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;

CREATE TABLE IF NOT EXISTS `entity` (
	`Id` INT(11) NOT NULL AUTO_INCREMENT,
	`DisplayName` VARCHAR(100) NOT NULL DEFAULT '',
	`EntityTypeId` INT(11) NOT NULL DEFAULT 0,
	`HashCode` CHAR(64)  NOT NULL,
	`SecondaryKey` INT(11) NULL,
	`Status` ENUM ('Available','Unavailable','Warning', 'Alarm', 'NoIconToDisplay', 'ToBeDeleted'
				, 'Original', 'ModifiedByCustomer'
				, 'ModifiedByFICEP', 'ToBeSkipped'
				, 'Empty', 'InProgress', 'Processed'
				, 'Executed', 'RQLoad', 'RQAck'
				, 'NotAvailable', 'Aborted', 'NotReady') NOT NULL,
	`Priority` INT NOT NULL DEFAULT 1,
	`CreatedBy` VARCHAR(32) NOT NULL DEFAULT 'MITROL',
	`CreatedOn` DATETIME NOT NULL DEFAULT current_timestamp(),
	`UpdatedBy` VARCHAR(32) NOT NULL DEFAULT 'MITROL',
	`UpdatedOn` DATETIME NOT NULL DEFAULT current_timestamp(),
	`RowVersion` TEXT NOT NULL,
	PRIMARY KEY (`Id`),
	FOREIGN KEY (EntityTypeId) REFERENCES entitytype(id),
	UNIQUE INDEX `IDX_Entity_DisplayName` (`DisplayName`, EntityTypeId) USING BTREE,
	INDEX `IDX_Entity_HashCode` (`HashCode`) USING BTREE	
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;


CREATE TABLE IF NOT EXISTS `entityLink` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `RelatedEntityHashCode` CHAR(64) NOT NULL,
  `EntityHashCode` CHAR(64) NOT NULL,
  `RelationType` ENUM('Child','ForeignKey', 'Sibling') NOT NULL COLLATE 'utf8mb4_bin',
  `RowNumber` INT(11) NOT NULL DEFAULT(1),
  `Level` INT(11) NOT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT COLLATE=utf8mb4_bin;

REPLACE INTO entitytype
(DisplayName, Id,  IsManaged)
VALUES
('ProfileL', 1, false),
('ProfileV', 2, false),
('ProfileB', 3, false),
('ProfileI', 4, false),
('ProfileD', 5, false),
('ProfileT', 6, false),
('ProfileU', 7, false),
('ProfileQ', 8, false),
('ProfileC', 9, false),
('ProfileF', 11, false),
('ProfileN', 12, false),
('ProfileP', 13, false),
('ProfileR', 14, false),
('ToolTS15', 15, false),
('ToolTS16', 16, false),
('ToolTS17', 17, false),
('ToolTS18', 18, false),
('ToolTS19', 19, false),
('ToolTS20', 20, false),
('ToolTS32', 32, false),
('ToolTS33', 33, false),
('ToolTS34', 34, false),
('ToolTS35', 35, false),
('ToolTS36', 36, false),
('ToolTS38', 38, false),
('ToolTS39', 39, false),
('ToolTS40', 40, false),
('ToolTS41', 41, false),
('ToolTS50', 50, false),
('ToolTS51', 51, false),
('ToolTS52', 52, false),
('ToolTS53', 53, false),
('ToolTS54', 54, false),
('ToolTS55', 55, false),
('ToolTS56', 56, false),
('ToolTS57', 57, false),
('ToolTS61', 61, false),
('ToolTS62', 62, false),
('ToolTS68', 68, false),
('ToolTS69', 69, false),
('ToolTS70', 70, false),
('ToolTS71', 71, false),
('ToolTS73', 73, false),
('ToolTS74', 74, false),
('ToolTS75', 75, false),
('ToolTS76', 76, false),
('ToolTS77', 77, false),
('ToolTS78', 78, false),
('ToolTS79', 79, false),
('ToolTS80', 80, false),
('ToolTS87', 87, false),
('ToolTS88', 88, false),
('ToolTS89', 89, false),
('ToolTS51XPR', 90, false),
('ToolTS51HPR', 91, false),
('ToolTS53XPR', 92, false),
('ToolTS53HPR', 93, false),
('StockProfileL', 94, false),
('StockProfileV', 95, false),
('StockProfileB', 96, false),
('StockProfileI', 97, false),
('StockProfileD', 98, false),
('StockProfileT', 99, false),
('StockProfileU', 100, false),
('StockProfileQ', 101, false),
('StockProfileC', 102, false),
('StockProfileF', 103, false),
('StockProfileN', 104, false),
('StockProfileP', 105, false),
('StockProfileR', 106, false),
('ToolHolder', 107, false),
('PieceProfileL', 108, false),
('PieceProfileV', 109, false),
('PieceProfileB', 110, false),
('PieceProfileI', 111, false),
('PieceProfileD', 112, false),
('PieceProfileT', 113, false),
('PieceProfileU', 114, false),
('PieceProfileQ', 115, false),
('PieceProfileC', 116, false),
('PieceProfileF', 117, false),
('PieceProfileN', 118, false),
('PieceProfileP', 119, false),
('PieceProfileR', 120, false),
('ProgramPiece', 121, false),
('ProgramCode', 128, false),
('ToolRangeTS32', 132, false),
('ToolRangeTS33', 133, false),
('ToolRangeTS34', 134, false),
('ToolRangeTS35', 135, false),
('ToolRangeTS36', 136, false),
('ToolRangeTS38', 138, false),
('ToolRangeTS39', 139, false),
('ToolRangeTS40', 140, false),
('ToolRangeTS41', 141, false),
('ToolRangeTS51', 151, false),
('ToolRangeTS52', 152, false),
('ToolRangeTS53', 153, false),
('ToolRangeTS54', 154, false),
('ToolRangeTS55', 155, false),
('ToolRangeTS56', 156, false),
('ToolRangeTS57', 157, false),
('ToolRangeTS61', 161, false),
('ToolRangeTS62', 162, false),
('ToolRangeTS68', 168, false),
('ToolRangeTS69', 169, false),
('ToolRangeTS70', 170, false),
('ToolRangeTS71', 171, false),
('ToolRangeTS73', 173, false),
('ToolRangeTS74', 174, false),
('ToolRangeTS75', 175, false),
('ToolRangeTS76', 176, false),
('ToolRangeTS77', 177, false),
('ToolRangeTS78', 178, false),
('ToolRangeTS79', 179, false),
('ToolRangeTS51HPR', 180, false),
('ToolRangeTS51XPR', 181, false),
('ToolRangeTS53HPR', 182, false),
('ToolRangeTS53XPR', 183, false),
('ToolSubRangeBevelTS51', 184, false),
('ToolSubRangeBevelTS52', 185, false),
('ToolSubRangeBevelTS53', 186, false),
('ToolSubRangeBevelTS54', 187, false),
('ToolSubRangeTrueHoleTS51', 188, false),
('ToolSubRangeTrueHoleTS51HPR', 189, false),
('ToolSubRangeTrueHoleTS51XPR', 190, false),
('ToolSubRangeTrueHoleTS53', 191, false),
('ToolSubRangeTrueHoleTS53HPR', 192, false),
('ToolSubRangeTrueHoleTS53XPR', 193, false),
('ToolRangeMarkingTS51', 194, false),
('ToolRangeMarkingTS51XPR', 195, false),
('ToolRangeMarkingTS53', 196, false),
('ToolRangeMarkingTS53XPR', 197, false),
('ProgramProfileL', 198, false),
('ProgramProfileV', 199, false),
('ProgramProfileB', 200, false),
('ProgramProfileI', 201, false),
('ProgramProfileD', 202, false),
('ProgramProfileT', 203, false),
('ProgramProfileU', 204, false),
('ProgramProfileQ', 205, false),
('ProgramProfileC', 206, false),
('ProgramProfileF', 207, false),
('ProgramProfileN', 208, false),
('ProgramProfileP', 209, false),
('ProgramProfileR', 210, false),
('ProductionRowProfileL', 211, false),
('ProductionRowProfileV', 212, false),
('ProductionRowProfileB', 213, false),
('ProductionRowProfileI', 214, false),
('ProductionRowProfileD', 215, false),
('ProductionRowProfileT', 216, false),
('ProductionRowProfileU', 217, false),
('ProductionRowProfileQ', 218, false),
('ProductionRowProfileC', 219, false),
('ProductionRowProfileF', 220, false),
('ProductionRowProfileN', 221, false),
('ProductionRowProfileP', 222, false),
('ProductionRowProfileR', 223, false),
('OperationNode', 224,false),
('OperationHol', 225,false),
('OperationPoint', 226,false),
('OperationSlot', 227,false),
('OperationTap', 228,false),
('OperationPathC', 229,false),
('OperationDeburr', 230,false),
('OperationBore', 231,false),
('OperationFlare', 232,false),
('OperationShape', 233,false),
('OperationMill', 234,false),
('OperationMCut', 235,false),
('OperationNotch', 236,false),
('OperationShf', 237,false),
('OperationMisc', 238,false),
('OperationStiff', 239,false),
('OperationFHol', 240,false),
('OperationDHol', 241,false),
('OperationPathV', 242,false),
('OperationPathS', 243,false),
('OperationPathM', 244,false),
('OperationCope', 245,false),
('OperationMark', 246,false),
('OperationToolTechnology', 247,false),
('OperationBHol', 248,false),
('OperationMSaw', 249,false),
('OperationSense', 250,false),
('Material', 251,false),
('VertexPathC', 252,false),
('VertexPathS', 253,false),
('VertexPathM', 254,false),	
('OperationSense', 255,false),
('VertexShape', 256,false);;
